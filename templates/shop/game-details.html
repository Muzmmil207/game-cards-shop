{% extends 'base.html' %} {% load static %} {% load stars_filers %} {% block content %}{% load humanize %}
<style>
  .active-card-btn {
    border-color: #e9c20d !important;
  }
  .card-btn {
    -webkit-tap-highlight-color: transparent;
    background-color: #fff;
    border-radius: 5px;
    border: solid 1px #e8e8e8;
    box-sizing: border-box;
    clear: both;
    cursor: pointer;
    display: inline-block;
    font-family: inherit;
    font-size: 14px;
    font-weight: normal;
    height: 42px;
    line-height: 40px;
    outline: none;
    padding-left: 18px;
    padding-right: 18px;
    position: relative;
    text-align: left !important;
    -webkit-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    white-space: nowrap;
    width: auto;
    color: black;
  }
</style>
<!-- Begin Li's Breadcrumb Area -->
<div class="breadcrumb-area">
  <div class="container">
    <div class="breadcrumb-content">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li class="active">Single Product Tab Style Top</li>
      </ul>
    </div>
  </div>
</div>
<!-- Li's Breadcrumb Area End Here -->
<!-- content-wraper start -->
<div class="content-wraper">
  <div class="container">
    <div class="row single-product-area">
      <div class="col-lg-5 col-md-6">
        <!-- Product Details Left -->
        <div class="product-details-left pt-60">
          <div class="product-details-images slider-navigation-1">
            <div class="lg-image">
              <a class="popup-img venobox vbox-item" href="{{game.image.url}}" data-gall="myGallery">
                <img src="{{game.image.url}}" alt="product image" />
              </a>
            </div>
          </div>
        </div>
        <!--// Product Details Left -->
      </div>

      <div class="col-lg-7 col-md-6">
        <div class="product-details-view-content pt-60">
          <div class="product-info">
            <h2>{{game.name}}</h2>
            <!-- <span class="product-details-ref">Reference: demo_15</span> -->
            <div class="rating-box pt-20">
              <ul class="rating rating-with-review-item">
                <li><i class="fa fa-star-o"></i></li>
                <li><i class="fa fa-star-o"></i></li>
                <li><i class="fa fa-star-o"></i></li>
                <li class="no-star"><i class="fa fa-star-o"></i></li>
                <li class="no-star"><i class="fa fa-star-o"></i></li>
                <li class="review-item"><a href="#reviews">اقرا المراجعات</a></li>
                <li class="review-item"><a href="#">اكتب مراجعة</a></li>
              </ul>
            </div>
            <div class="price-box pt-20">
              <span class="new-price new-price-2">
                <span>ج.س</span>
                <span id="card-price">{{cards.0.price|intcomma}}</span>
              </span>
            </div>
            <div class="product-desc">
              <p>
                <span>{{game.note|default:''}}</span>
              </p>
            </div>
            <div class="product-variants">
              <div class="produt-variants-size">
                <label>البطاقات</label>

                {% for card in cards %}
                <button class="card-btn" data-id="{{card.id}}" data-price="{{card.price|intcomma}}">
                  {{card.name}}
                </button>
                {% endfor %}
              </div>
            </div>
            <div class="single-add-to-cart">
              <form class="cart-quantity" id="cart-form" method="post">
                {% csrf_token %}
                <div class="quantity">
                  <label>الكمية</label>
                  <div class="cart-plus-minus">
                    <input class="cart-plus-minus-box" name="quantity" value="1" type="text" />
                  </div>
                </div>
                <input type="hidden" name="game_id" value="{{game.id}}" />
                <input type="hidden" name="card_id" id="card-input" value="{{cards.0.id}}" />
                <button class="add-to-cart" id="add-button" type="submit">إضافة إلى السلة</button>
              </form>
            </div>
            <div class="product-additional-info pt-25">
              <a class="wishlist-btn" href="{% url 'manage-wishlist' game.id %}">
                <i class="fa fa-heart-o"></i>
                إضافة الي قائمة الامنيات
              </a>
              <div class="product-social-sharing pt-25">
                <ul>
                  <li class="facebook">
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{request.get_full_url}}">
                      <i class="fa fa-facebook"></i>
                      Facebook
                    </a>
                  </li>
                  <li class="twitter">
                    <a href="https://twitter.com/intent/tweet?url={{request.get_full_url}}">
                      <i class="fa fa-twitter"></i>
                      Twitter
                    </a>
                  </li>
                  <li class="instagram">
                    <a href="https://www.instagram.com/share?url={{request.get_full_url}}">
                      <i class="fa fa-instagram"></i>
                      Instagram
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="block-reassurance">
              <!-- <ul>
                <li>
                  <div class="reassurance-item">
                    <div class="reassurance-icon">
                      <i class="fa fa-check-square-o"></i>
                    </div>
                    <p>Security policy (edit with Customer reassurance module)</p>
                  </div>
                </li>
                <li>
                  <div class="reassurance-item">
                    <div class="reassurance-icon">
                      <i class="fa fa-truck"></i>
                    </div>
                    <p>Delivery policy (edit with Customer reassurance module)</p>
                  </div>
                </li>
                <li>
                  <div class="reassurance-item">
                    <div class="reassurance-icon">
                      <i class="fa fa-exchange"></i>
                    </div>
                    <p>Return policy (edit with Customer reassurance module)</p>
                  </div>
                </li>
              </ul> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- content-wraper end -->
<!-- Begin Product Area -->
<div class="product-area pt-35">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="li-product-tab">
          <ul class="nav li-product-menu">
            <li>
              <a class="active" data-toggle="tab" href="#description"><span>الوصف</span></a>
            </li>
            <li>
              <a data-toggle="tab" href="#product-details"><span>Product Details</span></a>
            </li>
            <li>
              <a data-toggle="tab" href="#reviews"><span>مراجعات</span></a>
            </li>
          </ul>
        </div>
        <!-- Begin Li's Tab Menu Content Area -->
      </div>
    </div>
    <div class="tab-content">
      <div id="description" class="tab-pane active show" role="tabpanel">
        <div class="product-description">
          <span>{{game.description}}</span>
        </div>
      </div>
      <div id="product-details" class="tab-pane" role="tabpanel">
        <div class="product-details-manufacturer">
          <a href="#">
            <img src="images/product-details/1.jpg" alt="Product Manufacturer Image" />
          </a>
          <p>
            <span>Reference</span>
            demo_7
          </p>
          <p>
            <span>Reference</span>
            demo_7
          </p>
        </div>
      </div>
      <div id="reviews" class="tab-pane" role="tabpanel">
        <div class="product-reviews">
          <div class="product-details-comment-block">
            <div class="comment-review">
              <span>Grade</span>
              <ul class="rating">
                <li><i class="fa fa-star-o"></i></li>
                <li><i class="fa fa-star-o"></i></li>
                <li><i class="fa fa-star-o"></i></li>
                <li class="no-star"><i class="fa fa-star-o"></i></li>
                <li class="no-star"><i class="fa fa-star-o"></i></li>
              </ul>
            </div>
            <div class="comment-author-infos pt-25">
              <span>HTML 5</span>
              <em>01-12-18</em>
            </div>
            <div class="comment-details">
              <h4 class="title-block">Demo</h4>
              <p>Plaza</p>
            </div>
            <div class="review-btn">
              <a class="review-links" href="#" data-toggle="modal" data-target="#mymodal">Write Your Review!</a>
            </div>
            <!-- Begin Quick View | Modal Area -->
            <div class="modal fade modal-wrapper" id="mymodal">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-body">
                    <h3 class="review-page-title">Write Your Review</h3>
                    <div class="modal-inner-area row">
                      <div class="col-lg-6">
                        <div class="li-review-product">
                          <img src="images/product/large-size/3.jpg" alt="Li's Product" />
                          <div class="li-review-product-desc">
                            <p class="li-product-name">Today is a good day Framed poster</p>
                            <p>
                              <span>
                                Beach Camera Exclusive Bundle - Includes Two Samsung Radiant 360 R3 Wi-Fi Bluetooth
                                Speakers. Fill The Entire Room With Exquisite Sound via Ring Radiator Technology. Stream
                                And Control R3 Speakers Wirelessly With Your Smartphone. Sophisticated, Modern Design
                              </span>
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-6">
                        <div class="li-review-content">
                          <!-- Begin Feedback Area -->
                          <div class="feedback-area">
                            <div class="feedback">
                              <h3 class="feedback-title">Our Feedback</h3>
                              <form action="#">
                                <p class="your-opinion">
                                  <label>Your Rating</label>
                                  <span>
                                    <select class="star-rating">
                                      <option value="1">1</option>
                                      <option value="2">2</option>
                                      <option value="3">3</option>
                                      <option value="4">4</option>
                                      <option value="5">5</option>
                                    </select>
                                  </span>
                                </p>
                                <p class="feedback-form">
                                  <label for="feedback">Your Review</label>
                                  <textarea
                                    id="feedback"
                                    name="comment"
                                    cols="45"
                                    rows="8"
                                    aria-required="true"></textarea>
                                </p>
                                <div class="feedback-input">
                                  <p class="feedback-form-author">
                                    <label for="author">
                                      Name
                                      <span class="required">*</span>
                                    </label>
                                    <input
                                      id="author"
                                      name="author"
                                      value=""
                                      size="30"
                                      aria-required="true"
                                      type="text" />
                                  </p>
                                  <p class="feedback-form-author feedback-form-email">
                                    <label for="email">
                                      Email
                                      <span class="required">*</span>
                                    </label>
                                    <input
                                      id="email"
                                      name="email"
                                      value=""
                                      size="30"
                                      aria-required="true"
                                      type="text" />
                                    <span class="required">
                                      <sub>*</sub>
                                      Required fields
                                    </span>
                                  </p>
                                  <div class="feedback-btn pb-15">
                                    <a href="#" class="close" data-dismiss="modal" aria-label="Close">Close</a>
                                    <a href="#">Submit</a>
                                  </div>
                                </div>
                              </form>
                            </div>
                          </div>
                          <!-- Feedback Area End Here -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Quick View | Modal Area End Here -->
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Product Area End Here -->

<script>
  const cardBtns = document.querySelectorAll(".card-btn");
  cardBtns.forEach((cardBtn) => {
    cardBtn.addEventListener("click", () => {
      cardBtns.forEach((cardBtn) => {
        cardBtn.classList.remove("active-card-btn");
      });
      cardBtn.classList.toggle("active-card-btn");
      document.getElementById("card-input").value = cardBtn.dataset.id;

      document.getElementById("card-price").innerText = cardBtn.dataset.price;
    });
  });

  // let form = document.getElementById("cart-form");
  // const addButton = document.getElementById("add-button");
  // if (addButton) {
  //   addButton.addEventListener("click", async function (e) {
  //     e.preventDefault();
  //     let id = "{{game.id}}";

  //     const formData = new FormData(form);
  //     console.log(formData.values());
  //     console.log(formData);
  //     let response = await fetch('{% url "cart-add" %}', {
  //       method: "POST",
  //       headers: {
  //         "Content-Type": "application/json",
  //         "X-CSRFToken": csrftoken,
  //       },
  //       body: formData.values(),
  //       // body: JSON.stringify({
  //       //   productid: id,
  //       //   productqty: 1,
  //       //   csrfmiddlewaretoken: "{{csrf_token}}",
  //       // }),
  //     });
  //   });
  // }
</script>
{% endblock %}
